{% extends "./base_auth.html" %}
{% load crispy_forms_tags %}

{% block title %}
    Home Page
{% endblock title %}



{% block main %}
    <!-- {% include "./partials/sidebar.html" %}           -->
    <!-- {% include "./partials/sidebar.html" %}           -->
    <div class="p-4 sm:ml-64">    
        <div class="flex flex-col min-h-screen justify-center items-center ">

            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                        <div {% if message.tags %} 
                                {% if message.tags == "error" %} 
                                    class="alert alert-danger" 
                                {% endif %} 
                                class="alert alert-{{ message.tags }}" 
                            {% endif %} 
                            role="alert">
                            {{ message }}
                        </div>
                    {% endfor %}
                </ul>
            {% endif %}

            <h1>Welcome to Home</h1>
            <h1>Welcome, {{request.user}}</h1><br>
            <a href="{% url 'logout'%}">Logout</a>

            <form method="post" enctype="multipart/form-data" action="{% url 'post_create' %}">
                {% csrf_token %}
                {{ post_form|crispy}}
                <button type="submit" value="Submit" class="text-white  bg-gradient-to-r to-emerald-600 from-sky-400 border border-white rounded-lg font-medium text-sm px-5 py-2.5 mr-2 mb-2 focus:outline-none hover:shadow-lg">Submit</button>  
            </form>

                <hr class="w-64 h-1 my-8 bg-gray-200 border-0 rounded dark:bg-gray-700">
            <!-- {% include "./partials/sidebar.html" %}           -->
            {% for post in post_list %}
            <div hx-target="this" hx-swap="outerHTML" class="flex flex-col items-center">
                <div class="pt-2 pb-2">
                    <label class="text-transparent  bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400">Tweets</label>
                    <div class="border rounded-lg p-2 w-[500px] h-[200px] overflow-auto">
                    <p class="mb-3 font-light text-blue-600 dark:text-gray-400">{{ post.text }}</p>
                    <p class="mb-3 font-light text-blue-600 dark:text-gray-400">{{ post.id }}</p>
                        {% if post.image %}
                            <img class="h-auto max-w-md" src="{{ post.image.url }}" alt="{{ post.text }}" />
                        {% endif %}
                    </div>
                </div>
                <div class ="flex-row">
                    <button type="submit" value="Submit" class="text-white bg-gradient-to-r to-emerald-600 from-sky-400 border border-white rounded-lg font-medium text-sm px-5 py-2.5 mr-2 mb-2 focus:outline-none hover:shadow-lg" hx-get="{% url 'post_update' pk=post.pk %}">Edit Post</button>
                    <button type="submit" value="Submit" class="text-white bg-gradient-to-r from-red-500 to-red-600 border border-white rounded-lg font-medium text-sm px-5 py-2.5 mr-2 mb-2 focus:outline-none hover:shadow-lg" hx-get="{% url 'post_delete' pk=post.pk %}">Delete Post</button> 
                </div>   
            </div>
            
            {% endfor %}

        </div>
    </div>

    <style>
        .border {
          border-width: 2px;
          border-style: solid;
        }
        .overflow-auto {
          overflow: auto;
          word-break: break-word;
        }
    </style>

    <!-- <div class="p-4 sm:ml-64">
        <div class="p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700">
           <div class="grid grid-cols-3 gap-4 mb-4">
              <div class="flex items-center justify-center h-24 rounded bg-gray-50 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
              <div class="flex items-center justify-center h-24 rounded bg-gray-50 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
              <div class="flex items-center justify-center h-24 rounded bg-gray-50 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
           </div>
           <div class="flex items-center justify-center h-48 mb-4 rounded bg-gray-50 dark:bg-gray-800">
              <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
           </div>
           <div class="grid grid-cols-2 gap-4 mb-4">
              <div class="flex items-center justify-center rounded bg-gray-50 h-28 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
              <div class="flex items-center justify-center rounded bg-gray-50 h-28 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
              <div class="flex items-center justify-center rounded bg-gray-50 h-28 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
              <div class="flex items-center justify-center rounded bg-gray-50 h-28 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
           </div>
           <div class="flex items-center justify-center h-48 mb-4 rounded bg-gray-50 dark:bg-gray-800">
              <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
           </div>
           <div class="grid grid-cols-2 gap-4">
              <div class="flex items-center justify-center rounded bg-gray-50 h-28 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
              <div class="flex items-center justify-center rounded bg-gray-50 h-28 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
              <div class="flex items-center justify-center rounded bg-gray-50 h-28 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
              <div class="flex items-center justify-center rounded bg-gray-50 h-28 dark:bg-gray-800">
                 <p class="text-2xl text-gray-400 dark:text-gray-500">+</p>
              </div>
           </div>
        </div>
     </div> -->

{% endblock main %}